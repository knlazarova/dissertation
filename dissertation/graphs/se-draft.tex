\pdfoutput=1

\documentclass{l4proj}
\usepackage{float}
\usepackage{hyperref}
\usepackage{lscape}
\usepackage{rotating}
\usepackage{tabu}
\usepackage{multirow}
\usepackage[table,xcdraw]{xcolor}

%
% put any packages here
%

\begin{document}
\title{Are matrix-based or node-link graphs more readable when representing causal relationships for social and health data?}
\author{Kristina Lazarova}
\date{March, 2017}
\maketitle

\begin{abstract}
We show how to produce a level 4 project report using latex and pdflatex using the 
style file l4proj.cls
\end{abstract}

\educationalconsent
%
%NOTE: if you include the educationalconsent (above) and your project is graded an A then
%      it may be entered in the CS Hall of Fame
%
\tableofcontents
%==============================================================================
\chapter{Literature Review}
\pagenumbering{arabic}

\section{Data Visualisation}

Data visualisation has been described as a technique that makes use of computer-supported, interactive illustrations to deepen human's understanding of a dataset \cite{card1999readings}. Information visualisation is necessary when dealing with increasingly large and complex data.

Information visualisation systems are most helpful when a set of data is being explored \cite{fekete2008value}. Usually this occurs not when someone is looking for a specific answer to a question, but when a deeper understanding of that data set is sought. It was suggested that the value of information visualisation is not in understanding a specific question, it is about developing and deepening one's insights of a set of data \cite{fekete2008value}. Data visualisation is able to facilitate this process because there are a number of cognitive benefits associated with it. A large visual cue that illustrates data becomes a single point of reference for human cognitive processes. Visuals become external cognition helpers in facilitating human memory by providing a bigger working set for analysing data. Furthermore, visual architecture and design applied at company and department levels have been reported to be successful due to the low cognitive burden for visualization reading \cite{king2016cognitive}.

Data visualisation has been been used in a number of fields. For example, it is suggested to be successfully used in Bank of America Chicago Marathon, which is one of the biggest marathons in the world \cite{hanken2016developing}. Large amounts of live data are gathered to establish some of the main principles for event management information visualization. Some of the main benefits from these practices are keeping track of the progress of the participants, communicating information between the agencies organizing the marathon efficiently, and improving medical preparedness. Moreover, astronomical researchers have been suggested to benefit from data visualization techniques \cite{goodman2012principles}. One such technique is linked views in which a user is able to select, highlight and include or exclude points from display and analysis from various data visualisation dimensions. For example, an important visualisation for astrologists can be interactive exploration of relationships between data points in statistical graphs and locations in live 3D space. Another instance of beneficial data visualisation is "Geographic Information System" tools which are used in demographics and geography. For example, Engage3D provides the functionality of exploring layers of maps in a linked-view systems. 

Inventions in this field have been continuously made in order improve the visualisations and benefit the target public. For example, a heatmap represents a graphical illustration that evaluates conical distribution values around data points based on a respective data value that has associated respective data point \cite{cardno2014data}. Various implementations of a heatmap were developed and discussed since the original heatmap was created, in order to enable easy future work with heatmaps suited for a particularly needed area.

There have been data visualisation issue related to Big Data \cite{gorodov2013analytical}. First, visual noise is the phenomenon of having so many data points on the screen that the user cannot see them as separate points which leads to visibility loss. Second, large images are dependent on the device resolution abilities. However, even if add together many devices for partial data visualisation to represent a more detailed illustration or a larger amount of data, human perception will eventually reach its limit. Therefore, after a certain point people will not be able understand the representations or their analysis. A third problem is Information Loss which is caused by the previous issues because of data filtration and aggregation. These techniques are likely to hide information and mislead people analysing the data. Another problem is High Performance Requirements especially in dynamic visualization. In addition, the visualisation might be accompanied by high rate of image change and lead to people being unable to react to the number of data changes. 

A Big Data visualization method is suggested to be TreeMap \cite{gorodov2013analytical} which is a hierarchical way of representing data by rectangles. Some advantages of this method are that the hierarchical matching clearly shows data relations and extreme outliers are visible. The disadvantages related to this method are that the data must be hierarchical which makes it unsuitable for examining time patterns, for example. 

A well known issue with data visualisation is that sometimes it is challenging for people to understand it. A study aimed to examine familiarity of museum visitors with different visualisation techniques \cite{borner2015investigating}. They included charts, maps, graphs, and networks to reveal how familiar people are with them. It was found that even though most participants were interested in science and art they have difficulties naming and reading the visualizations. It was concluded that people are interested in visualisation techniques, but have significant difficulties in naming and understanding them. 

In order to solve this issue, another research area has focused on understanding how information visualization novices think and the approaches that can facilitate their learning. A study used sales data to find the barriers for novices when reading iterative visualisation construction and the way they think about visualisation specifications \cite{grammel2010information}. They found that the biggest barriers were interpreting questions into data factors, visual mappings, and understanding the visual representations. It was found that there is a need for instruments that suggest possible visualizations, facilitate help with learning, and are integrated with tool support for the whole analytic process. Furthermore, recent research acknowledged that individual differences between people will have influence on the way they interpret graphical representations \cite{Steichen:2013:UIV:2449396.2449439}. They suggested that visualization performance can be improved by personalising visuals according to one's needs, abilities and preferences.

Very little is known about the way users understand and read data visualisations and how they interact with different layouts \cite{etemadpour2015perception}. It is interesting to explore if there are layouts which provoke better task performance and better response time. Etemadpour and colleagues \cite{etemadpour2015perception} conducted a research to find out more about performance in similarity based layouts that are generated by multidimensional projections. The results suggested that projection performance is task-dependent and depends on the nature of the data. Therefore, they concluded that the same data layout can have different performance on different tasks and that performance will also be influenced by the characteristics of the data.

\section{Causal Relationships}

Causal relationships are of great interest for scientist who examine influence of different factors on each other. Particularly, research regarding health, social and behavioural sciences aim to investigate questions about causal rather than associative relationships. With the help of statistical analysis associations among different factors can be inferred. Associations are relationships that can be observed in joint distributions of factors such as regressions and correlations. Causal analysis, in addition, is the practice that aims to infer probabilities under factors that are changing \cite{pearl2010introduction}. These could be, for example, changes influenced by factors such as drinking, childhood issues or applied treatments. Causal relationships cannot be defined from the distribution alone - for example, effect, confounding, disturbance. 

A study looking to identify factors influencing blog design used the Decision Making Trial and Evaluation Laboratory method (DALMATEL) which is used to illustrate the relationships between factors and allows causal relationships to be shown \cite{hsu2012evaluation}. Some of the causal relationships they found were that color arrangement directly impacts simplicity of layout, colour arrangement directly impacts font arrangement, and color arrangement impacts itself. 

ReView is a tool for finding causal relationships in anomalies in network traffic. It has been suggested to facilitate better understanding of network representations \cite{Zhang:2015:VTC:2713579.2713583}. One of its features is minimizing the detailed information while showing the causal relationship. ReView can also quickly navigate the user through networks with a large number of requests and levels of abstractions.

Causal relationships are thought to be perceived directly if they are accompanied by animation \cite{ware1999visualizing}. The researchers followed Michotte's perception of causality principle which illustrates a causal event with a billiard ball hitting another ball and causing its motion. Ware and colleagues \cite{ware1999visualizing} introduced a visual causal vector method that shows a causal relationship between representations using animation. They found that the perception of causality depends on the simultaneous occurrence the visual causal vector and the change in the graphical representations. 


\section{Node-Link Graphs}

Node-link graphs consist of nodes which are connected by edges. Large amount of work has been dedicated to visualizing those structures in the most readable way. However, the larger the network that is being illustrated, the higher the possibility that the graph becomes dense and unreadable. This is especially true when the direction of the edges is important \cite{dwyer2013edge}. When representing causal relationships with node-link graphs if node n is causing node m, then the edge between those two nodes will point towards node m. In order to avoid the complexity of the large network some researchers have tried to add interaction with the graph \cite{gansner2005topological}, while others' intention was to create visuals that do not change the structure of the network and does not require interaction \cite{dwyer2013edge}. An innovative interaction technique was designed by Abello et al \cite{abello2006ask} where a user is able to navigate through a hierarchically clustered base of the graph. In the non interactive technique researchers decreased the complexity of large directed graphs by replacing single edges with edges which connect to groups of nodes \cite{dwyer2013edge}.  

Data driven journalism is also concerned with difficulties in showing directed relationships in large datasets \cite{niederer2015survey}.

Nodes have also been used to represent "visual programming language" or workflow and processing functions \cite{thattai2016systems}. The system translates the user input into "a sequence of data language", which will then be transformed into "service commands" that will be executed. The dependencies between the nodes and data flows are illustrated as interconnections between the vertices on the graphical user interface. 

A collider "C" is well represented by an "inverted fork", $A->C<-B$, in which the arrow shows a direct link from the tail factors to the head factor \cite{greenland2003quantifying}. Stratifying on the collider is likely to induce bias and influence the the association between A and B. In addition, a similar pattern found in directed acyclic graphs, called a confounder, can be illustrated by a "causal fork" - $A<-C-> B$. Greenland \cite{greenland2003quantifying} suggested that any change in the A-B link upon C-stratification will induce bias. Statistical adjustment for collider bias is suggested to lead to as much bias as not making adjustments for a confounder  \cite{janszky2010janus}. 

Directed acyclic graphs (DAGs) are increasingly used in representing causal relationships in modern epidemiology \cite{suttorp2015graphical}. The factors in DAGs are connected by arrows which can never create a closed loop \cite{greenland1999causal}. A path is defined by a sequence of arrows between the factors of interest. The DAG method is valuable as it is found to show underlying relations explicitly and easily identifies sources of confounding. Confounder is known to be a variable that is related with the exposure and the outcome but does not exists in the causal path between them. For example, chronic kidney disease and mortality are often caused by age. Confounding occurs when reading the causal relationships between chronic kidney disease and the outcome mortality. 

 

\section{Matrix-based Graphs}

An Adjacency matrix is frequently used to represent a network \cite{longabaugh2012combing}. If a network consists of n nodes, the matrix will consists n x n grid of cells. This is considered to be an unambiguous way of representing data. However, some of its disadvantages are that the area increases quadratically and as large networks are sparse there will mainly empty space on the matrix. Matrices can be used to represent both directed and undirected graphs. 

A new technique called Compressed Adjacency Matrices was introduced in 2012 for visualising gene regulatory networks \cite{dinkla2012compressed}. As those directed networks have specific structural traits, standard representations such as adjacency matrices, and node-link diagrams are unable to depict all traits. Compressed Adjacency Matrices cut and rearrange adjacency matrix so that no space is wasted in case of sparse network. There are specific structures which represent sub networks. This is how scientists came up with a new data structure in order to fit the characteristics of the data they analyse.

Furthermore, PathwayMatrix is another visualisation tool that represents specific relations between proteins in a pathway \cite{dang2015pathwaymatrix}. The implementation of the tool consists of adjacent matrices that interact with each other. Additional features were added to facilitate the data analysis. This visualisation software received positive feedback in the specific area of representing relations in proteins pathways. Consequently, there is no one best representations technique. Depending on the dataset specifications, the complexity and size of the data there might be many or only few sufficient ways to visualise it.       

A performance comparison between square and triangular matrices has been conducted to measure performance speed and accuracy \cite{liu2015effects}. It was found that performance is influenced by the matrix juxtaposition type which lead to the creation of a new matrix visualisation called TileMatrix. It represents a large amount of matrices and is effective at analysing networks that are multi-faceted and time-varying. With TileMatrix it is easy to see differences in matrices across time and facets. However, triangular matrices can work only in non-directed networks. 

\chapter{Introduction}

Brain connectivity visualisations are in the form of weighted graphs which are node-link graphs in which each edge is given a numerical weight. Alper and colleagues \cite{alper2013weighted} compared augmented adjacency matrix with node-link visualization by conducting a controlled experiment. They found that matrix-based graphs outperform node-linked graphs. It was concluded that for weight graphs, node-link representations are less readable and more error-prone when compared to matrices. On the other side, node-link graphs are adjustable to a specific spacial representation which might also be insightful when reading the graph. Overall, matrix-based graphs had higher accuracy.  

Moreover, another paper suggested that adjacency matrices are superior to node-link graphs in representing dense graphs because they are more compact and easier to look at \cite{sheny2007path}. However, they also stated that node-link graphs are better for path finding as a path can easily be followed if the arrows are not too tangled.





Adjacency matrices and node-link diagrams have been compared in another study \cite{keller2006matrices} to examine which is more suitable graphical representation for the general public. This research was provoked by the fact that matrices are mainly use in engineering area, while node-link graphs are generally a more popular way of visualisation. The research questions being examined were related to the attributes of the connectivity model influencing readability and which representation is more suitable for particular tasks. In addition, they filled the gap in previous research that did not take into consideration participants' familiarity with the data sets. It was found that error rates and response time are highly influenced by size and density. They confirmed Ghoniem et al () findings that matrix-based graphs outperform node-link graphs for dense and large graphs, and node-link graphs are more readable for small and sparse graphs. The only exception found is finding the path between two nodes in a graph. Furthermore, experience with the data set showed to has effect on performance. 



The main advantages of a matrix-based graph are that it has no overlapping and can be ordered. Therefore, it was predicted that tasks involving link finding and node finding will be better performed in matrix-based graphs rather than node-link graphs. Furthermore, node-link and matrix-based graphs were compared \cite{ghoniem2004comparison}. They also predicted that counting nodes should be equally difficult on both, while counting links and finding the most connected node should be easier in matrix-based representations. Node-link graphs should be better when building a path between two nodes. The reason for this is that matrix based graphs have the nodes represented twice which introduces extra complexity. Ghoniem and colleagues \cite{ghoniem2004comparison} also hypothesised that node-link graphs will be easier to work with when dealing with graphs with a small amount of graphs. In their experiment they had three sizes of graphs - 20, 50, and 100 nodes. They tested 36 participants and measured their performance on various tasks such as finding paths, neighbours, nodes and links between nodes. They found that performance in node-link graphs decreases as the size of the graph increases. This pattern was confirmed for all of the tasks except for finding path, where node-link graphs regardless of the size and density showed better results.

The present research aims to compare readability in different layouts in node-link and matrix-based graphs representing causal relationships. Following the literature review it is intriguing to explore which representations will show better performance and whether this will be modulated by factors such as layout, question domain, size and task.

\chapter{Implementation details}

\section{Software tools and technologies}

Given the opportunity to chose any tools and technologies for the development of this web application was a very exciting task. However, I had to be certain that the right decisions are made. After a research period followed by a trial-error week it was decided that the backend of the application will built with Node.js and JavaScript combined with the web application framework Express. Node.js was chosen on the grounds of being event-driven, non-blocking I/O model which contributes to a very efficient and lightweight software. A Node.js JavaScript engine is also used in the Google Chrome browser. JavaScript servers have incredible performance due to their asynchronous I/O. Node.js appears to be single-threaded from a developer's point of view, as there is no thread management involved in the development process. However, behind the scenes Node.js handles threading, file system events, implements the event loop, feature thread pooling etc. Coming from a Java background, the Maven equivalent in Node.js is NPM. By using NPM commands the developer is able to install variety of different modules to help the implementation process. NPM executes the function of a package manager. Express is the standard server framework for Node.js. It is usually described as a minimal and flexible Node.js web application framework. Many popular frameworks such as KeystoneJS, Kraken and Sails, are built on Express. 

AngularJS 1 was chosen for management of frontend functionality. Even though there is a newer version of the product, the lack of documentation and support online, was a sufficient reason for using the older AngularJS. It uses HTML as a template and enables the developers to extend it to express the application's components clearly. AngularJS supports features such as data binding and dependency injection which decreases the amount of code that a developer would usually write to implement them. 

The database system chosen for the project is PostgreSQL. Considering the size of the project an object-relational database was chosen. In addition, it decided on PostgreSQL in particular because it is open source and has gained a reputation of a reliable database system. Also previous experience with PosgreSQL from developers point of view made the decision easier.

* maybe database schema will be added here *  

\section{Development Process}
\subsection{User Stories}

The first step of the implementation was understanding the requirements and creating user stories. Some of the most important user stories are:

\begin{itemize}
   \item As a researcher, I want to be able to see participant's answers to questions, so that I can analyse the data.
   \item As a participant, I want to be able to see a graph and a questions at a time, so that I can complete the experiment.
   \item As a researcher, I want to keep participant's scores anonymous, so that the experiment comply with ethics requirements.
   \item As a participant, I want to be unable to go the next question before completing the present question first, so that I am certain that I haven't missed a question.
   \item As a researcher,
\end{itemize}

\subsection{Wire-frames}
After the requirements gathering analysis, development of wire-frames followed. Balsamiq Mockups 3 is the software used for the creation of wire-frames. An example of the research question page can be found in figure \ref{researchQuestion}.

\begin{figure}[H]
\centering
\includegraphics[width=9cm,height=7cm]{researchQuestion.PNG}
\caption{Research Question Wire-frame}
\label{researchQuestion}
\end{figure}
 
After discussing the wire-frames it appeared that some important features are missing. One of those features was a participants training session. The aim of the experiment is to test which graph is more readable for people who do not have regular exposure to such data visualisation. Therefore, it is important to make the participants aware of how to read each graph before the actual experiment. This way, the requirements specification became an iterative process during which a better understanding of the product evolved.

\subsection{System Design}
Designing the system was the next stage in the process.

\begin{figure}[H]
\centering
\includegraphics[width=15cm]{abstractDesign.png}
\caption{An abstract representation of the system design}
\label{abstractDesign}
\end{figure}

Figure \ref{abstractDesign} shows an abstract view of the system design. There is an Actor who will either be a participant in the study or a researcher. They will interact with the front-end which will be in the form of a web application in a browser. The front end will communicate with the back-end which will be implemented in Node.js. The back-end will make requests to the database to retrieve and send information. 

\begin{figure}[H]
\centering
\includegraphics[width=15cm]{moreSpecificDesign.png}
\caption{A more specific representation of the system design}
\label{moreSpecificDesign}
\end{figure}

Figure \ref{moreSpecificDesign} displays a more detailed version of the system design. This particular design has been implemented to separate the different concerns in this specific system. When the Actor interacts with the application, the front-end will send information to the Controllers. There are many controllers because there is a controller for each page with front-end functionality. The Controller component decides what should the next action be according to the user input. It has control over the front-end logic and sending requests to the service if information from the database or the server is requested. For example, the answers to all questions are kept in the front-end until a "Submit" button is clicked on. This action triggers a request to the Service. The Service component works with the back-end logic. It can send and retrieve data from the database and keep the information in the Repository. The Service also deals with the requests for the different web-pages. Also it ensures that the project dependencies are loaded.   

\subsection{Implementation}
The development process was split into front-end and back-end. Without using any frameworks, the front-end Html pages were created following the wireframes. Bootstrap was added to the html to improve the UI design and make it look more appealing for the participant. Furthermore, a hierarchical page set up was implemented by having all html pages extending one layout file. This also helped avoid repeated code as needed libraries were imported only once and all other files inherited them. A considerable amount of time was spent on developing the graphs and converting node-link graphs into matrix-based graphs. The different sizes were evolving from each other, which means that the information contained in the small graph was present in the medium one. Close to piloting the experiment, the front end had to be drastically changed in order to fit the large graphs on one screen.

By this time, it was clear that Node.js will be used to create a server so the next step was to implement it. The decision to use Express as a framework with Node.js followed and the html pages were mapped to a handlebars or hbs files. 

The following couple of weeks were dedicate on work on the database system: creating database schema, and tables, and work on connecting it with the server. 

\section{Challenges}
\begin{verbatim}
		Spring idea failed
		changed to Node.js
		Angular compatibility with Node.js
\end{verbatim}

In the beginning of this project the Java framework Spring was going to be used in the implementation as it is among the most widely used frameworks in industry \cite{shiLuiLi}. This decision was supported by extensive previous experience with Java from developer's point of view and the applicability of the skills to be acquired. However, one of the reasons why Spring is used in industry is because of the large and complex systems that exist there. The Spring framework works on a very high level of abstraction where you can easily write configuration files to add dependencies from different project. Therefore, it is considered rather unfriendly for small independent projects and developers with limited Spring experience. The reasoning behind this conclusion was provoked after a couple of unsuccessful attempts to set relative paths to different CSS and JavaScript files. The issue was found to be in the web application configuration file. This is how the very simple task of reading a css file turned to be a long tedious debugging process after which the realisation that Spring is unnecessary abstract and complex for this project occurred.

A new research for web-application frameworks followed. Node.js backend was chosen because of its event-driven, non-blocking I/O model which creates an efficient and lightweight server-side of the application. Another challenge appeared when trying to incorporate AngularJS with Node.js. Usually in AngularJS one uses curly braces to reference data structure from the AngularJS controller. However, Node.js also uses curly brackets to reference information from the backend in the frontend. After a long research  it was found that Node.js overrides the use of curly braces and the application is not displaying Angular data as it expects it come from the backend. Unfortunately, an appropriate error message does exist and it all had to be discovered during the development process. Instead of using curly brackets one can also use "ng-bind" and achieve the same result. This approached solved the issue until "ng-bind" information was need in "ng-src" to display the appropriate graph image. It is not possible to use "ng-bind" inside "ng-src" so the present solution at the time was no longer solving the problem. Therefore, the Angular configurations had be altered to use a different symbol. Implementing this solved the problem entirely. 

Another issue was the size of the graphs. During the implementation process it was necessary that a scroll bar appears in order to show the real size of the graphs. This was inconvenient for reading the graphs, and participants were going to need more time to read these graphs. Therefore, this was going to be a confounding variable in the experiment. In order to avoid this issue, the front-end pages had to be restructured. The bootstrap navigation bar had to be removed and the question had to be displayed on the left instead of below the graph. This also meant that this particular sequence of pages had to extend a different layout page, which does not contain the navigation bar and has a different bootstrap grid.

\section{Software reliability testing}

\chapter{Experiment}
\section{Design}

This is a within subject design experiment with two conditions. In the first condition participants answered questions related to causal relationships in node-link graphs, while in the second one they were asked to answer questions on matrix-based representation. Each condition had four levels - size, layout, question type and question domain. The dependent variables were time taken to answer each question and correctness of the answer. The participants were also given a questionnaire which required subjective answers about their graph preferences and how they enjoy solving logical problems. 

\section{Stimuli}

Figure \ref{experimentalDesign} illustrates the pattern which was used create the questions and the graphs. The domain questions are healthy and unhealthy gym behaviour, drinking issues, and student exams. The three different sizes were small (10 factors), medium (20 factors) and large (30 factors). There were three different layouts for each type of representation. The matrix-based layouts were alphabetical, in degree descending and out degree descending. The node-link layouts were hierarchical, orthogonal, and series parallel.  There was a direct relationship question and an indirect causal relationship question asked for each of the created graphs. The first six questions of the experiment were trial questions which did not count towards the final results. The characteristics of the graphs in these questions were chosen to be different from the graphs in the experimental questions. They were added to the beginning of the experiment which generated a total of 42 questions.

\begin{figure}[H]
\centering
\includegraphics[width=15cm]{experimentalObjects.png}
\caption{Experimental Design}
\label{experimentalDesign}
\end{figure}


The specified sequence of questions with matched layouts, question themes, and different sizes was likely to influence the results of the experiment because of the exposure effect of that particular sequence. Therefore, to ensure that all participants receive the questions in a different order, Latin square /cite{winer1962latin} randomization was used. The sequence of questions was different for each participant and the possibility of the questions sequence affecting the results was eliminated.
  
Node-link graphs \ref{nodeLinkGraph} were created using yEd and the equivalent matrix-based representations were generated using software which converts XGML node-link graphs into matrix-based graphs \ref{matrixBasedGraph}. As long as the graphs are from the same domain question and size, they represent the same information. However, all questions require different information to be read from the graphs to avoid learning effect. The representation of identical information ensures that the complexity of the data is the same. Both types of representations were displayed in their real size on the left side of the screen and the corresponding question was on the right. A special attention was paid to the letter's font size and retaining the original size of the image on one screen. Participants were not able to go to the next question before they answered the current one. In addition, to measure answer time more accurately, there was no "Next" button. Once a participant clicked on an answer it was automatically submitted and the next question was loaded on the page. Figure \ref{exampleQuestion} in Appendix C shows an example of a trial question.

\section{Pilot}

Conducting a pilot was an essential part of this study. It brought light into how people who have never been exposed to the graphs and the software before interact with them. It was vital to learn whether the tasks are clear and the software is easy to use. Three volunteers took part in the pilot. They were asked to sit on a chair in a silent environment and complete the experiment starting from the information sheet and finishing with the debrief form. At the end the participants were asked questions regarding the training, the clearness and enjoyment of the tasks. All participants said that the training in the beginning of the experiment is sufficient at explaining how to read the graphs. One of the participants, however, required confirmation that the correct direction of reading the graphs is from left to top. This is why, it was decided to make the first three questions trials in which the participants can ask as many questions as they need to understand how to read the graphs. The second three questions (4,5,6) were also going to be practice questions but they were not going to be explicitly informed about it. Consequently, during the first six tasks the participants were expected to fully learn how to interpret the graphs and their answers were not recorded in the results. 

An interesting problem regarding the nature of the trial questions was also considered. Initially, it was suggested that the trial instances are always the first questions of each sequence. However, as those questions would not be accounted for in the results and the Latin Square randomizes each sequence, this was going to lead to uneven number of answer for each type of graph. If this was to happen, the results of the experiment were going to be negatively influenced. In order to avoid this, 6 new questions were created using a combination of layouts, sizes and domains that has not been used for the original 36 questions. A mixture of different sizes and types was included to ensure that the participants have exposure to the main challenges of the experiment during the practice trials. These 6 questions were going to be added at the beginning of each sequence so that all participants are exposed to the same trial questions.  

All participants in the pilot said that the tasks are clear, the graphs' font size is readable, and different layouts and sizes are appropriately displaying the data. One participant mentioned that in the node-link organic layout, the label is on the arrow which makes it hard to read. The reason for this is that both labels and arrows are in black colour. Their note was taken into consideration but if changes are made to align the arrow and the label differently this would alter the organic yEd layout. Consequently, the results will provide information about a manually created layout similar to the organic yEd layout. Another solution of this issue was to change the label names to individual letters like "A" instead of actual factor labels such as "depression", and "pass exams". However, this was going to influence the complexity of the experiment and the participant's level of interest. Thus, no changes were made to the organic layout.

Furthermore, the pilot brought light into how entertaining the tasks are. It is vital to have the participants engaged with the tasks to ensure that they are concentrated and not easily distracted by third factors. Two participants said that the experiment was interesting and were eager to answer the questions. They said that the topics were easy to understand and it was interesting to find the causal relationship. One participant said that they did not consider the task to be very interesting, but they were in a hurry for another meeting and likely to look for an excuse to leave earlier.  

One volunteer in the pilot mentioned that sometimes it is hard to find the label you are looking for and they guessed the answer to the question by logical reasoning. To avoid this problem in the experiment, a note was be made to tell participants that there is no logical relationship between the causal relationships and they should not attempt to guess the correct answer. This is supposed to encourage them to look for the labels rather than guess the correct answer. It was also noted, that when a particular node has more than one causal relationship, it is much harder to follow a path, than in a complex matrix-based graph with many relationships. It will be interesting to see whether this observation will be confirmed by the experimental results.

The pilot was also extremely helpful for spotting technical issues. If it was not conducted and some of these problems were not accounted for, they were going to have catastrophic influence on the results. First, it was found that in one question the correct answer was being evaluated to incorrect because of a typo in the csv file that was used to populate the database. In addition, the answers were not written in a consistent way, which meant that the participants might had been influenced to choose the answer that is written differently from the rest of the answers. In order to fix these problems, the database table with the questions had to be deleted, and the csv file containing the questions' information needed to be reviewed. Finally, the database table had to be populated again with the updated data. 

Another technical issue found was concerned with the time recorder. It was found that the timing was starting and stopping when required, but the record of the time taken for a particular question was wrong. The issue was found to be caused by a wrong startTime variable during the timeTaken calculation. This was a scope issue, which was fixed for the real experiment. Moreover, in order to submit their answers the participants had to click a "Next" button. The timer used to stop once this button is clicked, record the time taken for the current answer, and start the timer for the next question. However, it was found that this extra click influences the recorded time and it would be more appropriate to have the time start and stop ones the participants choose an answer. This led to the decision to completely remove the "Next" button and submit the answers when one of the radio buttons has been selected. On that click the next graph and question would be loaded. It is not natural for the participants to expect clicking on a radio button to submit their answer, and show the next question, but they will be instructed about this feature in the information sheet and will have 6 trial questions to get used to that functionality. 
 
In general, the pilot helped in identifying small issues regarding the graphs layout and the manner in which questions were asked. Other bigger issues, that were going to influence the results, were also found such as typos leading to wrong evaluation of correctness and inaccurate time recorder. The pilot also inspired a new way in which the trial questions should be created and accounted for. The present experiment would not have been as accurate and precise if the pilot was not conducted. If the changes that it provoked implementing were to be found in the process of testing participants, the testing had to be started all over again and new participants had to be recruited.

\section{Participants}
There were 30 participants who took part in the experiment, aged between 20 and 29 years. The excluding criteria restricted people specialized in the subjects of Maths, Engineering and Computing Science from participating. The reason for this is that these fields are likely to include preparation in reading graphs. In addition, findings are expected to be representative for health and social sector, who are not likely to have background in those degrees.

\section{Procedure}

In order to have a more environmentally valid experiment, the study was conducted only on the experimenter's laptop in their presence. The participants were asked to sit on a chair and complete the experiment in a calm environment. They were recruited either in Glasgow University library or by posts in social media websites. The experiment was conducted in GU library in quiet group study areas. The participants had to read through an information sheet, explaining what is to follow in the next 30 minutes, consent from, asking them to agree to participate in the study, and a training showing them examples of how to solve the upcoming 42 research questions. At the end of the experiment participants were shown a short questionnaire and a debrief form.


\section{Results}

\subsection{Data Analysis Methodology}

Correct data analysis is vital for the successful completion of a research based project. This is why it was decided to complete a pilot of the data analysis methodology with fake data before all participants were tested. In order to achieve this the results of 20 participants were faked. As this is a repeated measures experiment the data layout had to be in wide format with each participant's data represented on each row. However, the way the database was being populated was in long format. Therefore, data wrangling had to applied before the data was in a format able to be statistically analysed. The data analysis was done with R Studio which provides a package for data wrangling. However, as there were a number of different factors defining each answer, and thousands of lines of raw data, it was decided that writing SQL queries would be more appropriate way to deal with the data layout. For each type of comparison, there was a query written to aggregate the needed information in a format ready to be inserted in R Studio. Then each group of data was tested for outliers. It was decided that if outliers were to be found, it is important to find out whether there is a reasonable explanation for their existence. If so a decision to remove or keep them was to follow. 

The Anderson-Darling normality test was conducted to check whether the time data was normally distributed. Additional reading suggested that R Studio has other normality tests which are more popular and have better reputation. One such test is Shapiro-Wilks Normality Test. Both tests showed a p-value of less than 0.05 for the fake data which rejected the Null hypothesis that the data is normally distributed. However, for the real data only Shapiro-Wilk test was going to be used. R Studio has a very easy way of plotting histograms by using the hist() function. This was found to be helpful to visualise the distribution of the values. If the data values were normally distributed then a repeated measures t-test was going to be run to see whether there is a significant difference between the time taken to read the two types of graphs. However, as the data was found to be not normally distributed, a non-parametric test had to be used. The non-parametric equivalent of repeated measures t-test is Wilcoxon. R Studio has a library containing the test so one command had to be executed to see whether there is a significant difference between node-link and matrix-based graphs. 

The type of representation is the main aspect being investigated. However, there are also other research questions that need to be answered. For example, the different sizes and layouts of each type of graph can be compared. Therefore, a comparison between the three layouts for each size could also be done. This means that there will be three factors and a different statistical test needs to be used. For non-parametric data this test is Friedman followed by post-hoc comparison in case of significant difference. The data was faked so that a significant result was found and there was a need to investigate which are the pairs of comparisons significantly different from each other. It was found that there is a function which is no longer built in in R Studio but performs this calculation. This is why, the implementation of the function was found and imported in the working directory. Furthermore, there is a measurement of correct answers and this is a different type of data - boolean. For example, in the fake data there were 45 percent error rate in the matrix-based graphs and 16 percent errors in the node-link graphs. 

The fake data analysis took longer than expected due to the unforeseen circumstances of data layout difficulties, inexperience with R Studio, and statistical analysis of large amounts of data. However, because of this process, a clear layout of the statistical analysis for the real data was prepared. All steps of the process were clear beginning with SQL queries to aggregate data, to inserting data in R Studio, and running all statistical tests.

\subsection{Experimental Results}
% Please add the following required packages to your document preamble:
% \usepackage{multirow}
\begin{table}[]
\centering
\caption{Direct}
\label{my-label}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
\multicolumn{3}{|c|}{\textbf{Matrix}}     & \multicolumn{3}{c|}{\textbf{Node-link}} & \textbf{P-value}              \\ \hline
\multicolumn{3}{|c|}{14.15}               & \multicolumn{3}{c|}{16.85}              & 0.0128*                       \\ \hline
\multicolumn{3}{|c|}{small 10.78}         & \multicolumn{3}{c|}{small 11.92}        & 0.1055                        \\ \hline
\multicolumn{3}{|c|}{medium 14.06}        & \multicolumn{3}{c|}{medium 14.01}       & 0.8776                        \\ \hline
\multicolumn{3}{|c|}{large 16.03}         & \multicolumn{3}{c|}{large 24.76}        & 5.633e-07*                    \\ \hline
\multicolumn{3}{|c|}{\multirow{12}{*}{}}  & \multicolumn{4}{c|}{small}                                              \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H 9.65      & P 14.20     & O 11.97     & 0.0013*                       \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H           & \multicolumn{2}{c|}{P}    & \textless2e-16*               \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{P}    & O           & 1.8e-09*                      \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{H}    & O           & 3.5e-05*                      \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{4}{c|}{medium}                                             \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H 14.20     & P 14.62     & O 13.19     & 0.6575                        \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{4}{c|}{large}                                              \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H 17.96     & P 38.86     & O 17.46     & 3.261e-06*                    \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{P}    & O           & \textless2e-16*               \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H           & \multicolumn{2}{c|}{P}    & \textless2e-16*               \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H           & \multicolumn{2}{c|}{O}    & 0.001*                        \\ \hline
\multicolumn{3}{|c|}{small}               & \multicolumn{3}{c|}{\multirow{9}{*}{}}  &                               \\ \cline{1-3} \cline{7-7} 
inDD 10.35   & outDD 9.25   & alpha 12.75 & \multicolumn{3}{c|}{}                   & 0.07939                       \\ \cline{1-3} \cline{7-7} 
\multicolumn{3}{|c|}{medium}              & \multicolumn{3}{c|}{}                   &                               \\ \cline{1-3} \cline{7-7} 
inDD 14.64   & outDD 12.70  & alpha 14.86 & \multicolumn{3}{c|}{}                   & \multicolumn{1}{l|}{0.03943*} \\ \cline{1-3} \cline{7-7} 
inDD         & \multicolumn{2}{c|}{outDD} & \multicolumn{3}{c|}{}                   & \multicolumn{1}{l|}{2.4e-10*} \\ \cline{1-3} \cline{7-7} 
\multicolumn{2}{|c|}{outDD} & alpha       & \multicolumn{3}{c|}{}                   & \multicolumn{1}{l|}{7.5e-07*} \\ \cline{1-3} \cline{7-7} 
\multicolumn{2}{|c|}{inDD}  & alpha       & \multicolumn{3}{c|}{}                   & \multicolumn{1}{l|}{0.12}     \\ \cline{1-3} \cline{7-7} 
\multicolumn{3}{|c|}{large}               & \multicolumn{3}{c|}{}                   & \multicolumn{1}{l|}{}         \\ \cline{1-3} \cline{7-7} 
inDD 15.34   & outDD 14.76  & alpha 18.00 & \multicolumn{3}{c|}{}                   & \multicolumn{1}{l|}{0.355}    \\ \hline
\end{tabular}
\end{table}


% Please add the following required packages to your document preamble:
% \usepackage{multirow}
\begin{table}[]
\centering
\caption{Path}
\label{my-label}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
\multicolumn{3}{|c|}{\textbf{Matrix}}     & \multicolumn{3}{c|}{\textbf{Node-link}} & \textbf{P-value} \\ \hline
\multicolumn{3}{|c|}{47.37}               & \multicolumn{3}{c|}{39.51}              & 0.02847*         \\ \hline
\multicolumn{3}{|c|}{small 27.83}         & \multicolumn{3}{c|}{small 23.09}        & 0.03997*         \\ \hline
\multicolumn{3}{|c|}{medium 31.67}        & \multicolumn{3}{c|}{medium 32.85}       & 0.2665           \\ \hline
\multicolumn{3}{|c|}{large 47.38}         & \multicolumn{3}{c|}{large 39.51}        & 0.02847*         \\ \hline
\multicolumn{3}{|c|}{\multirow{15}{*}{}}  & \multicolumn{4}{c|}{small}                                 \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H 27.31      & P 22.43     & O 19.62    & 5.943e-06*       \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H            & \multicolumn{2}{c|}{P}   & 4.5e-12*         \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{P}     & O          & 4.5e-12 *        \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H            & \multicolumn{2}{c|}{O}   & \textless 2e-16* \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{4}{c|}{medium}                                \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H 23.54      & P 26.44     & O 48.55    & 3.08e-09*        \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H            & \multicolumn{2}{c|}{P}   & 2.40e-13*        \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{H}     & O          & \textless 2e-16* \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{P}     & O          & \textless 2e-16* \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{4}{c|}{large}                                 \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H   31.44    & P   39.20   & O  47.88   & 0.0273*          \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{P}     & O          & 1.1e-09*         \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & H            & \multicolumn{2}{c|}{P}   & 1                \\ \cline{4-7} 
\multicolumn{3}{|c|}{}                    & \multicolumn{2}{c|}{H}     & O          & 1.1e-09*         \\ \hline
\multicolumn{3}{|c|}{small}               & \multicolumn{3}{c|}{\multirow{12}{*}{}} &                  \\ \cline{1-3} \cline{7-7} 
inDD 30.20   & outDD 29.50  & alpha 23.79 & \multicolumn{3}{c|}{}                   & 0.0003245*       \\ \cline{1-3} \cline{7-7} 
inDD         & \multicolumn{2}{c|}{outDD} & \multicolumn{3}{c|}{}                   & 1.0e-09*         \\ \cline{1-3} \cline{7-7} 
\multicolumn{2}{|c|}{outDD} & alpha       & \multicolumn{3}{c|}{}                   & \textless 2e-16* \\ \cline{1-3} \cline{7-7} 
inDD         & \multicolumn{2}{c|}{alpha} & \multicolumn{3}{c|}{}                   & 1.7e-07*         \\ \cline{1-3} \cline{7-7} 
\multicolumn{3}{|c|}{medium}              & \multicolumn{3}{c|}{}                   &                  \\ \cline{1-3} \cline{7-7} 
inDD 39.07   & outDD 28.68  & alpha 27.29 & \multicolumn{3}{c|}{}                   & 0.001454*        \\ \cline{1-3} \cline{7-7} 
inDD         & \multicolumn{2}{c|}{outDD} & \multicolumn{3}{c|}{}                   & 4.5e-13*         \\ \cline{1-3} \cline{7-7} 
\multicolumn{2}{|c|}{inDD}  & alpha       & \multicolumn{3}{c|}{}                   & 7.7e-16*         \\ \cline{1-3} \cline{7-7} 
\multicolumn{2}{|c|}{outDD} & alpha       & \multicolumn{3}{c|}{}                   & 0.26             \\ \cline{1-3} \cline{7-7} 
\multicolumn{3}{|c|}{large}               & \multicolumn{3}{c|}{}                   &                  \\ \cline{1-3} \cline{7-7} 
inDD 45.45   & outDD 48.93  & alpha 47.7  & \multicolumn{3}{c|}{}                   & 0.356            \\ \hline
\end{tabular}
\end{table}


\section{Discussion}

\chapter{Conclusion}


%%%%%%%%%%%%%%%%
%              %
%  APPENDICES  %
%              %
%%%%%%%%%%%%%%%%
\begin{appendices}

\chapter{Database Schema}

\begin{verbatim}
participants_answers(question_id, participant_id, answer, time)
participants_info(participant_id,participant_name, email, uni_degree, age)
questions(question_id, question, one, two, three, four, correct, image)
\end{verbatim}


\chapter{Running the Programs}
An example of running from the command line is as follows:
\begin{verbatim}
      > java MaxClique BBMC1 brock200_1.clq 14400
\end{verbatim}
This will apply $BBMC$ with $style = 1$ to the first brock200 DIMACS instance allowing 14400 seconds of cpu time.

\chapter{Graphs}

\begin{figure}[H]
\centering
\includegraphics[width=15cm]{drinkingIssuesLargeHier.jpg}
\caption{Large node-link graph in hierarchical layout}
\label{nodeLinkGraph}
\end{figure}



\begin{figure}[H]
\centering
\includegraphics[width=15cm]{studentLargeAlpha.PNG}
\caption{Large matrix-based graph in alphabetical layout}
\label{matrixBasedGraph}
\end{figure}


\begin{sidewaysfigure}[ht]
\centering
\includegraphics[width=24cm]{exampleQuestion.PNG}
\caption{Example of an experimental question}
\label{exampleQuestion}
\end{sidewaysfigure}


\end{appendices}
%%%%%%%%%%%%%%%%%%%%
%   BIBLIOGRAPHY   %
%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{plain}
\bibliography{bib}

\end{document}
